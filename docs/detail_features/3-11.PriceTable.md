# PriceTable: ê°€ê²© ë°ì´í„° í…Œì´ë¸”

> ğŸ“„ **ìƒìœ„ ë¬¸ì„œ**: [ETF_DETAIL.md](./ETF_DETAIL.md) Â§ 3-11

ì¼ìë³„ **OHLC, ê±°ë˜ëŸ‰, ë“±ë½ë¥ **ì„ í…Œì´ë¸”ë¡œ í‘œì‹œ. ì ‘ê¸°/í¼ì¹˜ê¸°(ê¸°ë³¸ ì ‘í˜), í˜ì´ì§€ë‹¹ 20ê±´, ì •ë ¬Â·í˜ì´ì§€ë„¤ì´ì…˜ ì§€ì›. ë°˜ì‘í˜•(ëª¨ë°”ì¼ ì¹´ë“œ í˜•íƒœ), ë‹¤í¬ëª¨ë“œ ì§€ì›.

---

## 1. ë™ì‘ ë°©ì‹ ê°œìš”

- **ë°ì´í„°**: ETFDetailì˜ pricesData (ì¶”ê°€ API ì—†ìŒ)
- **ìœ„ì¹˜**: ETFDetail í•˜ë‹¨, ì ‘ê¸°/í¼ì¹˜ê¸° ë²„íŠ¼ì´ ìˆëŠ” ì¹´ë“œ ë‚´ë¶€
- **ê¸°ë³¸ ìƒíƒœ**: `isTableExpanded` false â†’ í…Œì´ë¸” ë³¸ë¬¸ ìˆ¨ê¹€
- **ë²„íŠ¼**: "ê°€ê²© ë°ì´í„° (Nê±´)" + "í¼ì¹˜ê¸° â–¼" / "ì ‘ê¸° â–²"

---

## 2. í…Œì´ë¸” ì»¬ëŸ¼

| ì»¬ëŸ¼ | ë°ì´í„° í‚¤ | ì •ë ¬ í‚¤ | í¬ë§· |
|------|----------|---------|------|
| ë‚ ì§œ | date | date | yyyy-MM-dd |
| ì‹œê°€ | open_price | â€” | formatPrice |
| ê³ ê°€ | high_price | â€” | formatPrice |
| ì €ê°€ | low_price | â€” | formatPrice |
| ì¢…ê°€ | close_price | close | formatPrice |
| ê±°ë˜ëŸ‰ | volume | volume | formatVolume |
| ë“±ë½ë¥  | daily_change_pct | change | formatPercent, getPriceChangeColor |

---

## 3. ì •ë ¬

- **ì´ˆê¸°**: date desc (ìµœì‹ ìˆœ)
- **í•¸ë“¤ëŸ¬**: handleSort(key) â€” ë™ì¼ í‚¤ í´ë¦­ ì‹œ ascâ†”desc í† ê¸€
- **ì§€ì› í‚¤**: date, close, volume, change
- **ì •ë ¬ ì‹œ**: currentPage 1ë¡œ ë¦¬ì…‹

---

## 4. í˜ì´ì§€ë„¤ì´ì…˜

- **itemsPerPage**: ê¸°ë³¸ 20
- **totalPages**: Math.ceil(sortedData.length / itemsPerPage)
- **currentPage**: useState, í˜ì´ì§€ ì „í™˜ ë²„íŠ¼ìœ¼ë¡œ ë³€ê²½
- **í‘œì‹œ**: "1 / N" í˜•íƒœ, ì´ì „/ë‹¤ìŒ ë²„íŠ¼

---

## 5. ë°˜ì‘í˜•

- **ë°ìŠ¤í¬í†±**: í…Œì´ë¸” í˜•íƒœ
- **ëª¨ë°”ì¼**: ì¹´ë“œ í˜•íƒœ (ê° rowë¥¼ ì¹´ë“œë¡œ, flex/stack ë°°ì¹˜)

---

## 6. ë°ì´í„° ìš”êµ¬ì‚¬í•­

pricesData ê° í•­ëª©:

```javascript
{
  date: string,           // yyyy-MM-dd
  open_price: number,
  high_price: number,
  low_price: number,
  close_price: number,
  volume: number,
  daily_change_pct: number
}
```

---

## 7. ETFDetail ì—°ë™

- **ì ‘ê¸° ìƒíƒœ**: `isTableExpanded` (useState, ê¸°ë³¸ false)
- **ë²„íŠ¼**: onClick={() => setIsTableExpanded(!isTableExpanded)}
- **ì¡°ê±´ë¶€ ë Œë”**: isTableExpandedì¼ ë•Œë§Œ `<PriceTable data={pricesData} itemsPerPage={20} />` ë Œë”

---

## 8. ë¬¸ì œ í•´ê²°

| í˜„ìƒ | ì›ì¸ | ì¡°ì¹˜ |
|------|------|------|
| í…Œì´ë¸” ë¹„ì–´ ìˆìŒ | pricesData ë¹ˆ ë°°ì—´ | ê°€ê²© API, ë‚ ì§œ ë²”ìœ„ í™•ì¸ |
| ì •ë ¬ í›„ ìˆœì„œ ì´ìƒ | sortConfig key ì˜¤íƒ€ | date/close/volume/change í™•ì¸ |
| ë“±ë½ë¥  ìƒ‰ìƒ ì•ˆ ë‚˜ì˜´ | getPriceChangeColor ë¯¸ì ìš© | tdì— í•´ë‹¹ í´ë˜ìŠ¤ ì ìš© í™•ì¸ |
| ëª¨ë°”ì¼ì—ì„œ ë ˆì´ì•„ì›ƒ ê¹¨ì§ | ì¹´ë“œ í˜•íƒœ ë¯¸êµ¬í˜„ | ëª¨ë°”ì¼ breakpointì—ì„œ ì¹´ë“œ ìŠ¤íƒ€ì¼ ì ìš© |

---

## 9. ìš”ì•½

| í•­ëª© | ë‚´ìš© |
|------|------|
| ì»´í¬ë„ŒíŠ¸ | `components/etf/PriceTable.jsx` |
| ì…ë ¥ | data (pricesData), itemsPerPage (20) |
| ì •ë ¬ | date, close, volume, change |
| í˜ì´ì§€ë„¤ì´ì…˜ | 20ê±´/í˜ì´ì§€ |
| ì ‘ê¸° | ETFDetailì˜ isTableExpandedë¡œ ì œì–´ |

---

## 10. ê´€ë ¨ íŒŒì¼

| íŒŒì¼ | ì—­í•  |
|------|------|
| `frontend/src/components/etf/PriceTable.jsx` | ê°€ê²© í…Œì´ë¸” UI |
| `frontend/src/utils/format.js` | formatPrice, formatVolume, formatPercent, getPriceChangeColor |
| `frontend/src/pages/ETFDetail.jsx` | isTableExpanded, pricesData ì „ë‹¬, ì ‘ê¸° ë²„íŠ¼ |
