# StrategySummary: íˆ¬ì ì „ëµ

> ğŸ“„ **ìƒìœ„ ë¬¸ì„œ**: [ETF_DETAIL.md](./ETF_DETAIL.md) Â§ 3-3

**ë°±ì—”ë“œ ì¸ì‚¬ì´íŠ¸ API** ê¸°ë°˜ íˆ¬ì ì „ëµ. ë‹¨ê¸°Â·ì¤‘ê¸°Â·ì¥ê¸° ì „ëµê³¼ ì¢…í•© ì¶”ì²œÂ·ì½”ë©˜íŠ¸, í•µì‹¬ í¬ì¸íŠ¸ë¥¼ í‘œì‹œí•œë‹¤. ì „ëµ ìœ í˜•ë³„ ë±ƒì§€ ìƒ‰ìƒìœ¼ë¡œ ì‹œê° êµ¬ë¶„í•œë‹¤.

---

## 1. ë™ì‘ ë°©ì‹ ê°œìš”

- **API**: `GET /api/etfs/{ticker}/insights?period={1w|1m|3m|6m|1y}`
- **ê¸°ê°„ ì—°ë™**: ETFDetailì˜ ë‚ ì§œ ë²”ìœ„ì— ë”°ë¼ period ë§¤í•‘ (7dâ†’1w, 1mâ†’1m, 3mâ†’3m)
- **ìºì‹œ**: staleTime 2ë¶„ (CACHE_STALE_TIME_SLOW)
- **ìˆœì„œ**: useQueries 2ìˆœìœ„ (ì¸ì‚¬ì´íŠ¸)ë¡œ ë³‘ë ¬ í˜¸ì¶œ

### ì‘ë‹µ êµ¬ì¡° (ê¸°ëŒ€)

```json
{
  "strategy": {
    "short_term": "ë¹„ì¤‘í™•ëŒ€|ë³´ìœ |ê´€ë§|ë¹„ì¤‘ì¶•ì†Œ",
    "medium_term": "ë¹„ì¤‘í™•ëŒ€|ë³´ìœ |ê´€ë§|ë¹„ì¤‘ì¶•ì†Œ",
    "long_term": "ë¹„ì¤‘í™•ëŒ€|ë³´ìœ |ê´€ë§|ë¹„ì¤‘ì¶•ì†Œ",
    "recommendation": "ë¹„ì¤‘í™•ëŒ€|ë³´ìœ |ê´€ë§|ë¹„ì¤‘ì¶•ì†Œ",
    "comment": "ì¢…í•© ì½”ë©˜íŠ¸ í…ìŠ¤íŠ¸"
  },
  "key_points": ["í¬ì¸íŠ¸1", "í¬ì¸íŠ¸2", ...]
}
```

---

## 2. ì „ëµ ë±ƒì§€ ìƒ‰ìƒ

| ì „ëµ ìœ í˜• | Tailwind í´ë˜ìŠ¤ | ìš©ë„ |
|----------|-----------------|------|
| ë¹„ì¤‘í™•ëŒ€ | `bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400` | ë§¤ìˆ˜ ìœ ë„ |
| ë³´ìœ  | `bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400` | í˜„ìƒíƒœ ìœ ì§€ |
| ê´€ë§ | `bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300` | ëŒ€ê¸° |
| ë¹„ì¤‘ì¶•ì†Œ | `bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400` | ë§¤ë„ ìœ ë„ |

---

## 3. UI êµ¬ì„±

### 3-1. íˆ¬ì ì „ëµ ì„¹ì…˜

- **ë‹¨ê¸°Â·ì¤‘ê¸°Â·ì¥ê¸°**: ê°ê° ë±ƒì§€ë¡œ í‘œì‹œ
- **ì¢…í•©**: `strategy.recommendation` ë±ƒì§€ + `strategy.comment` í…ìŠ¤íŠ¸

### 3-2. í•µì‹¬ í¬ì¸íŠ¸ ì„¹ì…˜

- `key_points` ë°°ì—´ì´ ìˆìœ¼ë©´ `<ul>` ë¦¬ìŠ¤íŠ¸ë¡œ í‘œì‹œ
- ê° í•­ëª©: ì²´í¬ ì•„ì´ì½˜ + í…ìŠ¤íŠ¸
- key_pointsê°€ ì—†ê±°ë‚˜ ë¹ˆ ë°°ì—´ì´ë©´ ì„¹ì…˜ ìì²´ ë¯¸í‘œì‹œ

### 3-3. ìƒíƒœë³„ ì²˜ë¦¬

| ìƒíƒœ | UI |
|------|-----|
| isLoading | Spinner + "ì¸ì‚¬ì´íŠ¸ ë¶„ì„ ì¤‘..." |
| error | ê²½ê³  ì¹´ë“œ (ë…¸ë€ ë°°ê²½) + ì—ëŸ¬ ë©”ì‹œì§€ |
| !insights | null (ë¯¸ë Œë”) |

---

## 4. period ë§¤í•‘

| dateRange.range | insightsPeriod | API period |
|-----------------|----------------|------------|
| 7d | 1w | 1w |
| 1m | 1m | 1m |
| 3m | 3m | 3m |

ETFDetailì—ì„œ `insightsPeriod`ë¥¼ ê³„ì‚°í•˜ì—¬ StrategySummaryì— ì „ë‹¬.

---

## 5. ë¬¸ì œ í•´ê²°

| í˜„ìƒ | ì›ì¸ | ì¡°ì¹˜ |
|------|------|------|
| ì „ëµì´ í‘œì‹œë˜ì§€ ì•ŠìŒ | insights API ì—ëŸ¬ ë˜ëŠ” null | ì—ëŸ¬ UI í™•ì¸, ë°±ì—”ë“œ ë¡œê·¸ í™•ì¸ |
| period ë¶ˆì¼ì¹˜ | dateRangeì™€ insightsPeriod ë™ê¸°í™” ì˜¤ë¥˜ | ETFDetailì˜ insightsPeriod useMemo í™•ì¸ |
| í•µì‹¬ í¬ì¸íŠ¸ê°€ ë¹„ì–´ ìˆìŒ | APIê°€ key_points ë¯¸ë°˜í™˜ | ë°±ì—”ë“œ insights_service ì‘ë‹µ ìŠ¤í‚¤ë§ˆ í™•ì¸ |
| ë±ƒì§€ ìƒ‰ìƒ ì´ìƒ | strategy ê°’ì´ 4ì¢… ì™¸ | getStrategyColor fallback â†’ 'ê´€ë§' (íšŒìƒ‰) |

---

## 6. ìš”ì•½

| í•­ëª© | ë‚´ìš© |
|------|------|
| ì»´í¬ë„ŒíŠ¸ | `components/etf/StrategySummary.jsx` |
| API | GET /api/etfs/{ticker}/insights?period= |
| ì…ë ¥ | ticker, period, insights, isLoading, error |
| ì „ëµ ìœ í˜• | ë¹„ì¤‘í™•ëŒ€, ë³´ìœ , ê´€ë§, ë¹„ì¤‘ì¶•ì†Œ |
| ìºì‹œ | 2ë¶„ |

---

## 7. ê´€ë ¨ íŒŒì¼

| íŒŒì¼ | ì—­í•  |
|------|------|
| `frontend/src/components/etf/StrategySummary.jsx` | ì „ëµ ìš”ì•½ UI |
| `frontend/src/pages/ETFDetail.jsx` | period ê³„ì‚°, API í˜¸ì¶œ, props ì „ë‹¬ |
| `backend/app/routers/etfs.py` | insights ì—”ë“œí¬ì¸íŠ¸ |
| `backend/app/services/insights_service.py` | ì „ëµÂ·í•µì‹¬í¬ì¸íŠ¸ ìƒì„± |
