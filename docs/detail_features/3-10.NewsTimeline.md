# NewsTimeline: ìµœê·¼ ë‰´ìŠ¤

> ğŸ“„ **ìƒìœ„ ë¬¸ì„œ**: [ETF_DETAIL.md](./ETF_DETAIL.md) Â§ 3-10

ì¢…ëª© ê´€ë ¨ **ìµœê·¼ ë‰´ìŠ¤**ë¥¼ íƒ€ì„ë¼ì¸ í˜•íƒœë¡œ í‘œì‹œ. ìµœê·¼ 7ì¼Â·ìµœëŒ€ 10ê±´, ë¶„ì„ ì˜µì…˜(analyze: true)ìœ¼ë¡œ ì„¼í‹°ë¨¼íŠ¸Â·í† í”½ ë°˜í™˜. ETFDetailì—ì„œëŠ” ìƒìœ„ useQueriesë¡œ ë°ì´í„° ì „ë‹¬í•˜ì—¬ APIë¥¼ ì§ì ‘ í˜¸ì¶œí•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŒ.

---

## 1. ë™ì‘ ë°©ì‹ ê°œìš”

- **API**: `GET /api/news/{ticker}` (ë˜ëŠ” newsApi.getByTicker)
- **íŒŒë¼ë¯¸í„°**: days=7, limit=10(ë˜ëŠ” stateë¡œ ì¡°ì •), analyze=true
- **ìºì‹œ**: staleTime 5ë¶„
- **ì´ì¤‘ ëª¨ë“œ**: propsë¡œ newsData ì „ë‹¬ ì‹œ API ë¹„í˜¸ì¶œ(fallback useQuery enabled: false), ì—†ìœ¼ë©´ ìì²´ useQueryë¡œ ì¡°íšŒ

---

## 2. ë°ì´í„° êµ¬ì¡°

### API ì‘ë‹µ (ê¸°ëŒ€)

```json
{
  "news": [
    { "title", "url", "source", "date", "relevance", "sentiment", "topics", ... }
  ],
  "analysis": {
    "sentiment": "positive|negative|neutral",
    "topics": ["í† í”½1", "í† í”½2", ...]
  }
}
```

### í”„ë¡ íŠ¸ ë¶„ì„ (fallback)

- ë°±ì—”ë“œ analysis ì—†ìœ¼ë©´ `analyzeNewsList`, `getSentimentStyle`(utils/newsAnalyzer) ì‚¬ìš©

---

## 3. UI êµ¬ì„±

- **íƒ€ì„ë¼ì¸**: ì¼ìë³„ ê·¸ë£¹, ì ‘ê¸°/í¼ì¹˜ê¸° (expandedDates state)
- **ê¸°ë³¸**: ì²« ë²ˆì§¸ ë‚ ì§œë§Œ í¼ì¹¨
- **í•­ëª©**: ì œëª©, ì¶œì²˜, URL(ìƒˆ íƒ­), ë‚ ì§œ
- **ì„¼í‹°ë¨¼íŠ¸**: SentimentBadge (positive/negative/neutral, ì•„ì´ì½˜Â·ìƒ‰ìƒ)
- **í† í”½**: TopicTag (#í† í”½)

---

## 4. limit ì¡°ì •

- ê¸°ë³¸ limit 10, stateë¡œ ë³€ê²½ ê°€ëŠ¥ (ë”ë³´ê¸° ë“±)
- queryKeyì— limit í¬í•¨ â†’ ë³€ê²½ ì‹œ ì¬ìš”ì²­

---

## 5. ë¡œë”©/ì—ëŸ¬

- `finalIsLoading`, `finalError`: props ìš°ì„ , ì—†ìœ¼ë©´ fallback useQuery ê²°ê³¼
- ë¡œë”©/ì—ëŸ¬ ì‹œ NewsTimeline ë‚´ë¶€ì—ì„œ ì²˜ë¦¬ (ìŠ¤ì¼ˆë ˆí†¤ ë˜ëŠ” ì—ëŸ¬ ë©”ì‹œì§€)

---

## 6. ë¬¸ì œ í•´ê²°

| í˜„ìƒ | ì›ì¸ | ì¡°ì¹˜ |
|------|------|------|
| ë‰´ìŠ¤ ì—†ìŒ | API ë¯¸í˜¸ì¶œ ë˜ëŠ” ë¹ˆ ì‘ë‹µ | enabled ì¡°ê±´, days/limit í™•ì¸ |
| ì„¼í‹°ë¨¼íŠ¸ ì•ˆ ë‚˜ì˜´ | analysis ë¯¸ë°˜í™˜ | ë°±ì—”ë“œ analyze ì˜µì…˜, newsAnalyzer fallback |
| ë§í¬ ìƒˆ íƒ­ ì•ˆ ì—´ë¦¼ | target="_blank" rel="noopener noreferrer" ë¯¸ì„¤ì • | a íƒœê·¸ ì†ì„± í™•ì¸ |
| ì¼ìë³„ ì ‘ê¸° ê¼¬ì„ | expandedDates state ì˜¤ë¥˜ | í‚¤ë¥¼ date ë¬¸ìì—´ë¡œ ì•ˆì •ì  ìœ ì§€ |

---

## 7. ìš”ì•½

| í•­ëª© | ë‚´ìš© |
|------|------|
| ì»´í¬ë„ŒíŠ¸ | `components/news/NewsTimeline.jsx` |
| API | GET /api/news/{ticker} (days=7, limit=10, analyze=true) |
| ì…ë ¥ | ticker, newsData(ì„ íƒ), isLoading(ì„ íƒ), error(ì„ íƒ) |
| ìºì‹œ | 5ë¶„ |
| ë¶„ì„ | ë°±ì—”ë“œ analysis ë˜ëŠ” analyzeNewsList fallback |

---

## 8. ê´€ë ¨ íŒŒì¼

| íŒŒì¼ | ì—­í•  |
|------|------|
| `frontend/src/components/news/NewsTimeline.jsx` | ë‰´ìŠ¤ íƒ€ì„ë¼ì¸ UI |
| `frontend/src/utils/newsAnalyzer.js` | analyzeNewsList, getSentimentStyle |
| `frontend/src/pages/ETFDetail.jsx` | useQueries ë‰´ìŠ¤ ì¿¼ë¦¬, props ì „ë‹¬ |
| `backend` | news API, ë¶„ì„ |
