# ì¢…ëª© ì •ë³´ + ìµœê·¼ ê°€ê²© ì¹´ë“œ

> ğŸ“„ **ìƒìœ„ ë¬¸ì„œ**: [ETF_DETAIL.md](./ETF_DETAIL.md) Â§ 3-4

ì¢…ëª© ìƒì„¸ì˜ **ì¢…ëª© ì •ë³´**(2/3)ì™€ **ìµœê·¼ ê°€ê²©Â·íˆ¬ì í˜„í™©**(1/3)ì„ ê·¸ë¦¬ë“œë¡œ ë°°ì¹˜. ì¢…ëª© ë©”íƒ€ ì •ë³´ì™€ ìµœê·¼ 1ì¼ ê°€ê²©, íˆ¬ì ì¢…ëª©ì¼ ê²½ìš° ë§¤ì…ê°€Â·ìˆ˜ëŸ‰Â·í‰ê°€ê¸ˆì•¡Â·ì†ìµì„ í•œ ë¸”ë¡ì— í‘œì‹œí•œë‹¤.

---

## 1. ë™ì‘ ë°©ì‹ ê°œìš”

- **ë°ì´í„° ì†ŒìŠ¤**: `etf`(GET /api/etfs/{ticker}), `pricesData`(ê°€ê²© API, ìµœì‹  1ê±´ = latestPrice)
- **ê³„ì‚°**: ETFDetailì—ì„œ purchaseReturn, evaluationAmount, totalInvestment, currentProfitLossë¥¼ useMemoë¡œ íŒŒìƒ
- **ë ˆì´ì•„ì›ƒ**: `grid grid-cols-1 lg:grid-cols-3`, ì¢…ëª© ì •ë³´ `lg:col-span-2`, ìµœê·¼ ê°€ê²© `1/3`

---

## 2. ì¢…ëª© ì •ë³´ ì¹´ë“œ (2/3)

| í•­ëª© | ì†ŒìŠ¤ | í‘œì‹œ ì¡°ê±´ |
|------|------|-----------|
| í‹°ì»¤ | etf.ticker | í•­ìƒ |
| íƒ€ì… | etf.type | ETF/STOCK ë±ƒì§€, ìƒ‰ìƒ êµ¬ë¶„ |
| í…Œë§ˆ | etf.theme | line-clamp-1 (1ì¤„ ë§ì¤„ì„) |
| êµ¬ë§¤ì¼ | etf.purchase_date | ìˆìœ¼ë©´ë§Œ í‘œì‹œ, format yyyy-MM-dd |

---

## 3. ìµœê·¼ ê°€ê²© ì¹´ë“œ (1/3)

### 3-1. ê¸°ë³¸ í•­ëª©

| í•­ëª© | ì†ŒìŠ¤ | í¬ë§· |
|------|------|------|
| ê¸°ì¤€ì¼ | latestPrice.date | format yyyy-MM-dd |
| ì¢…ê°€ | latestPrice.close_price | formatPrice (ì²œ ë‹¨ìœ„ ì½¤ë§ˆ) |
| ì „ì¼ ëŒ€ë¹„ | latestPrice.daily_change_pct | formatPercent, getPriceChangeColor |

### 3-2. íˆ¬ì ì¢…ëª© í•œì • (ë§¤ì…ê°€Â·ìˆ˜ëŸ‰ ì„¤ì • ì‹œ)

| í•­ëª© | ê³„ì‚° | í¬ë§· |
|------|------|------|
| ë§¤ì…ê°€ | etf.purchase_price | formatPrice |
| ë§¤ì… ëŒ€ë¹„ ìˆ˜ìµë¥  | (currentPrice - purchase_price) / purchase_price * 100 | formatPercent, ìƒ‰ìƒ |
| ë³´ìœ  ìˆ˜ëŸ‰ | etf.quantity | formatNumber |
| ì´ íˆ¬ì ê¸ˆì•¡ | purchase_price Ã— quantity | formatPrice |
| í‰ê°€ ê¸ˆì•¡ | close_price Ã— quantity | formatPrice, ê°•ì¡° ì¹´ë“œ(íŒŒë‘) |
| í˜„ì¬ ì†ìµ | evaluationAmount - totalInvestment | formatPrice, ìˆ˜ìµë¥  ê´„í˜¸, ìƒ‰ìƒ |

### 3-3. ì¹´ë“œ ë°°ì¹˜

- **í‰ê°€ ê¸ˆì•¡**: `bg-blue-50 dark:bg-blue-900/30`
- **í˜„ì¬ ì†ìµ**: ìˆ˜ìµ ì‹œ `bg-red-50`, ì†ì‹¤ ì‹œ `bg-blue-50`, í…ìŠ¤íŠ¸ ìƒ‰ìƒ êµ¬ë¶„

---

## 4. íŒŒìƒ ê°’ ê³„ì‚° (ETFDetail)

```javascript
// ìµœê·¼ ê°€ê²© = pricesData[0] (APIëŠ” ìµœì‹ ìˆœ)
const latestPrice = pricesData?.[0]

// ë§¤ì… ëŒ€ë¹„ ìˆ˜ìµë¥ 
const purchaseReturn = (latestPrice.close_price - etf.purchase_price) / etf.purchase_price * 100

// í‰ê°€ ê¸ˆì•¡ = ì¢…ê°€ Ã— ìˆ˜ëŸ‰
const evaluationAmount = etf.quantity != null ? latestPrice.close_price * etf.quantity : null

// ì´ íˆ¬ì ê¸ˆì•¡ = ë§¤ì…ê°€ Ã— ìˆ˜ëŸ‰
const totalInvestment = etf.purchase_price * etf.quantity

// í˜„ì¬ ì†ìµ = í‰ê°€ - íˆ¬ì
const currentProfitLoss = evaluationAmount - totalInvestment
```

---

## 5. ë°ì´í„° ë¶€ì¡± ì‹œ

- `latestPrice` ì—†ìœ¼ë©´: "ê°€ê²© ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤" í‘œì‹œ
- quantityê°€ 0ì´ì–´ë„ í‰ê°€ ê¸ˆì•¡Â·ì†ìµ ê³„ì‚° (0 Ã— ì¢…ê°€ = 0)

---

## 6. ë¬¸ì œ í•´ê²°

| í˜„ìƒ | ì›ì¸ | ì¡°ì¹˜ |
|------|------|------|
| ë§¤ì… ëŒ€ë¹„ ìˆ˜ìµë¥  ì•ˆ ë‚˜ì˜´ | purchase_price ë¯¸ì„¤ì • | ì¢…ëª© ì„¤ì •ì—ì„œ ë§¤ì…ê°€ ì…ë ¥ |
| í‰ê°€ ê¸ˆì•¡ì´ 0 | quantity 0 ë˜ëŠ” null | ì¢…ëª© ì„¤ì •ì—ì„œ ìˆ˜ëŸ‰ ì…ë ¥ |
| ìˆ«ì í¬ë§· ê¹¨ì§ | formatPrice/formatNumber ë¯¸ì‚¬ìš© | utils/format í™•ì¸ |

---

## 7. ìš”ì•½

| í•­ëª© | ë‚´ìš© |
|------|------|
| ìœ„ì¹˜ | ETFDetail ë‚´ë¶€, ì¸ë¼ì¸ ë§ˆí¬ì—… |
| ê·¸ë¦¬ë“œ | lg:grid-cols-3, ì¢…ëª©ì •ë³´ 2/3, ê°€ê²© 1/3 |
| ë°ì´í„° | etf, pricesData (â†’ latestPrice) |
| ìœ í‹¸ | formatPrice, formatNumber, formatPercent, getPriceChangeColor |

---

## 8. ê´€ë ¨ íŒŒì¼

| íŒŒì¼ | ì—­í•  |
|------|------|
| `frontend/src/pages/ETFDetail.jsx` | ì¢…ëª©ì •ë³´Â·ê°€ê²© ì¹´ë“œ ë§ˆí¬ì—…, íŒŒìƒê°’ ê³„ì‚° |
| `frontend/src/utils/format.js` | í¬ë§· ìœ í‹¸ |
